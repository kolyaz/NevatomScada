"use strict";(self["webpackChunknevatomscada"]=self["webpackChunknevatomscada"]||[]).push([[668],{2260:(t,e,s)=>{s.d(e,{L:()=>a});const a=t=>{try{if(t)return JSON.parse(t)}catch(e){return!1}return!1}},4606:(t,e,s)=>{s.d(e,{Z:()=>c});var a=s(3673),n=s(2323);const o={class:"AlarmText marquee"},l={id:"alarmText"};function i(t,e,s,i,m,r){return(0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("span",l,(0,n.zw)(t.text),1)])}const m=(0,a.aZ)({name:"AlarmText",data(){return{text:""}},props:{alarms:String},mounted(){this.text=this.alarms},watch:{alarms(){this.text=this.alarms}}});var r=s(3414),u=s(7518),d=s.n(u);m.render=i;const c=m;d()(m,"components",{QItem:r.Z})},2668:(t,e,s)=>{s.r(e),s.d(e,{default:()=>_});var a=s(3673);const n={class:"q-gutter-md q-pa-md",style:{"max-width":"330px","min-width":"330px"}},o=(0,a._)("span",{class:"q-ml-sm"},"Выбор сезона.",-1),l={style:{"margin-top":"40px","max-width":"330px"},class:" q-gutter-md q-pa-md"};function i(t,e,s,i,m,r){const u=(0,a.up)("q-icon"),d=(0,a.up)("q-input"),c=(0,a.up)("q-card-section"),p=(0,a.up)("q-item-section"),g=(0,a.up)("q-btn-toggle"),h=(0,a.up)("q-item"),w=(0,a.up)("q-card"),V=(0,a.up)("q-btn"),f=(0,a.up)("AlarmText"),v=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(v,null,{default:(0,a.w5)((()=>[(0,a._)("div",n,[t.ustH?((0,a.wg)(),(0,a.j4)(d,{key:0,color:"teal",filled:"",modelValue:t.ustH,"onUpdate:modelValue":e[0]||(e[0]=e=>t.ustH=e),label:"Уставка нагрева C°"},{prepend:(0,a.w5)((()=>[(0,a.Wm)(u,{name:"thermostat",color:"deep-orange"})])),_:1},8,["modelValue"])):(0,a.kq)("",!0),t.ustC?((0,a.wg)(),(0,a.j4)(d,{key:1,color:"teal",filled:"",modelValue:t.ustC,"onUpdate:modelValue":e[1]||(e[1]=e=>t.ustC=e),label:"Уставка охлаждения C°"},{prepend:(0,a.w5)((()=>[(0,a.Wm)(u,{name:"thermostat",color:"blue-10"})])),_:1},8,["modelValue"])):(0,a.kq)("",!0),t.pritVentNom?((0,a.wg)(),(0,a.j4)(d,{key:2,color:"teal",filled:"",modelValue:t.pritVentNom,"onUpdate:modelValue":e[2]||(e[2]=e=>t.pritVentNom=e),label:"Номинальная сорость прит. вент.%"},{prepend:(0,a.w5)((()=>[(0,a.Wm)(u,{name:"fast_rewind",color:"green"})])),_:1},8,["modelValue"])):(0,a.kq)("",!0),t.vitVentNom?((0,a.wg)(),(0,a.j4)(d,{key:3,color:"teal",filled:"",modelValue:t.vitVentNom,"onUpdate:modelValue":e[3]||(e[3]=e=>t.vitVentNom=e),label:"Номинальная сорость выт. вент.%"},{prepend:(0,a.w5)((()=>[(0,a.Wm)(u,{name:"fast_forward",color:"green"})])),_:1},8,["modelValue"])):(0,a.kq)("",!0),t.seson?((0,a.wg)(),(0,a.j4)(w,{key:4,class:"q-px-sm q-pb-md"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{class:"row items-center"},{default:(0,a.w5)((()=>[o])),_:1}),(0,a.Wm)(h,null,{default:(0,a.w5)((()=>[(0,a.Wm)(p,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{color:"orange",name:"brightness_medium"})])),_:1}),(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[(0,a.Wm)(g,{modelValue:t.seson,"onUpdate:modelValue":e[4]||(e[4]=e=>t.seson=e),spread:"",class:"my-custom-toggle","no-caps":"",rounded:"",unelevated:"","toggle-color":"orange",color:"blue-grey-1","text-color":"primary",options:[{label:"Зима",value:"0"},{label:"Лето",value:"1"}]},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})):(0,a.kq)("",!0)]),(0,a._)("div",l,[(0,a._)("div",null,[(0,a.Wm)(V,{onClick:t.SetSettings,style:{"min-width":"330px"},color:"secondary",icon:"done",label:"Применить"},null,8,["onClick"])]),(0,a._)("div",null,[(0,a.Wm)(V,{style:{"min-width":"330px"},"text-color":"black",color:"warning",icon:"pending_actions",label:"Настройка расписания"})]),(0,a._)("div",null,[(0,a.Wm)(V,{style:{"min-width":"330px"},"text-color":"black",color:"warning",icon:"settings_suggest",label:"Дополнительные настройки ПЛК"})])]),(0,a._)("div",null,[(0,a.Wm)(f,{alarms:t.alarms},null,8,["alarms"])])])),_:1})}var m=s(2260),r=s(8825),u=s(4606);const d=(0,a.aZ)({name:"PageSettings",components:{AlarmText:u.Z},data(){return{ustH:!1,ustC:!1,pritVentNom:!1,vitVentNom:!1,seson:!1,mount:!1,isLoad:!1,alarms:""}},methods:{OnMount(){const t={getSettings:1,Message:"getSettings"};this.$socket.send(JSON.stringify(t))},IfName(t){return t||!1},WebSockets(t){const e=(0,r.Z)();try{return t&&(this.$socket.onmessage=t=>{const s=(0,m.L)(t.data);console.log(s),s.Settings&&(this.ustH=this.IfName(s.Settings.ustH),this.ustC=this.IfName(s.Settings.ustC),this.pritVentNom=this.IfName(s.Settings.pritVentNom),this.seson=this.IfName(s.Settings.seson),this.vitVentNom=this.IfName(s.Settings.vitVentNom),console.log(this.ustH)),s.Message&&s.Message&&e.notify({message:s.Message,color:"secondary",position:"bottom"}),s.PLCdata.alarms&&(this.$global.$emit("PLCdata",s.PLCdata),this.alarms=s.PLCdata.alarms)}),""}catch(s){return""}},SetSettings(){const t={setSettings:{ustH:this.ustH,ustC:this.ustC,pritVentNom:this.pritVentNom,vitVentNom:this.vitVentNom,seson:this.seson},Message:"setSettings"};this.$socket.send(JSON.stringify(t))}},mounted(){this.OnMount(),this.mount=!0,this.WebSockets(this.mount)},setup(){return{}}});var c=s(4379),p=s(4842),g=s(4554),h=s(151),w=s(5589),V=s(5096),f=s(3414),v=s(2035),N=s(8761),b=s(8240),k=s(7518),S=s.n(k);d.render=i;const _=d;S()(d,"components",{QPage:c.Z,QInput:p.Z,QIcon:g.Z,QCard:h.Z,QCardSection:w.Z,QAvatar:V.Z,QItem:f.Z,QItemSection:v.Z,QBtnToggle:N.Z,QBtn:b.Z})}}]);